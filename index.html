<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>▌│█║▌║▌║</title>

<style>
    body {
        margin: 0;
        width: 100vw;
        height: 100vh;
        background: #000; /* CHANGED: canvas background */
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: white;
        overflow: hidden;
    }

    canvas {
        position: fixed;
        inset: 0;
        z-index: 0;
        image-rendering: pixelated;
    }

    #center {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        max-width: 80%;
        z-index: 10;
        pointer-events: none;
    }

    #center p {
        font-size: 1.5rem;
        line-height: 1.6;
        margin: 0;
    }

    .fragment {
        position: absolute;
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
        font-size: 0.85rem;
        color: #ffffff;
        max-width: 320px;
        line-height: 1.4;
        white-space: pre-wrap;
        z-index: 10;
    }
</style>
</head>

<body>

<canvas id="bg"></canvas>

<div id="center">
<p>ʷʰᵃᵗ'ˢ ᵗʰᵉ ᵖᵒⁱⁿᵗ?</p>
</div>

<script>

const canvas = document.getElementById("bg");
const ctx = canvas.getContext("2d", { alpha: false });
let W, H, dpr;

function resize() {
  dpr = Math.max(1, Math.min(2, devicePixelRatio || 1));
  W = Math.floor(innerWidth * dpr);
  H = Math.floor(innerHeight * dpr);
  canvas.width = W;
  canvas.height = H;
  ctx.imageSmoothingEnabled = false;
}
addEventListener("resize", resize);
resize();

function glitch() {
  const slices = 3 + (Math.random() * 7 | 0);
  for (let i = 0; i < slices; i++) {
    const h = (6 + Math.random() * 40) * dpr;
    const y = Math.random() * (H - h);
    const shift = (-60 + Math.random() * 120) * dpr;
    ctx.drawImage(canvas, 0, y, W, h, shift, y, W, h);
  }
}

function frame() {
  ctx.fillStyle = "rgba(0,0,0,0.1)";
  ctx.fillRect(0, 0, W, H);

  if (Math.random() < 0.18) {
    const v = 140 + Math.random() * 80 | 0;
    ctx.fillStyle = `rgba(${v},${v},${v},0.06)`;
    ctx.fillRect(
      Math.random() * W,
      Math.random() * H,
      Math.random() * 240 * dpr,
      Math.random() * 50 * dpr
    );
  }

  if (Math.random() < 0.07) glitch();

  requestAnimationFrame(frame);
}
frame();

</script>

<script>

const fragments = [
];

const gridCells = [
    [0,0], [0,1], [0,2],
    [1,0],         [1,2],
    [2,0], [2,1], [2,2]
];

const storageKey = "fragmentLayout";
let saved = JSON.parse(localStorage.getItem(storageKey)) || {};

const cellPadding = 8;
const cellWidth = 100 / 3;
const cellHeight = 100 / 3;

fragments.forEach((text, index) => {
    let data = saved[text];

    if (!data) {
        const cell = gridCells[index];
        if (!cell) return;

        data = {
            cell,
            offsetX: Math.random() * (cellWidth - cellPadding * 2) + cellPadding,
            offsetY: Math.random() * (cellHeight - cellPadding * 2) + cellPadding
        };

        saved[text] = data;
    }

    const x = data.cell[1] * cellWidth + data.offsetX;
    const y = data.cell[0] * cellHeight + data.offsetY;

    const el = document.createElement("div");
    el.className = "fragment";
    el.textContent = text;
    el.style.left = x + "vw";
    el.style.top = y + "vh";

    document.body.appendChild(el);
});

localStorage.setItem(storageKey, JSON.stringify(saved));
</script>

</body>
</html>
